(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(38)},18:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n(11),u=n.n(s),r=n(0),c=n.n(r),o=(n(18),n(3)),l=n.n(o),i="/api/persons",m=function(){return l.a.get(i).then(function(e){return e.data})},f=function(e){return l.a.post(i,e).then(function(e){return e.data})},d=function(e,t){return l.a.put("".concat(i,"/").concat(e),t).then(function(e){return e.data})},g=function(e){return l.a.delete("".concat(i,"/").concat(e)).then(function(e){return e.data})},h=function(e){var t=e.id,n=e.name,a=e.number,s=e.setPersons,u=e.setMessage;return c.a.createElement("p",null,n," ",a," ",c.a.createElement("button",{onClick:function(){!function(e,t){window.confirm("Haluatko varmasti poistaa kohteen ".concat(t))&&g(e).then(function(){u({message:"".concat(t," poistettu."),style:"success"}),setTimeout(function(){u({message:null})},2e3),m().then(function(e){s(e)})})}(t,n)}},"poista"))},p=function(e){var t=e.persons,n=e.setMessage,a=e.Filtered,s=e.setPersons,u=t.filter(function(e){return e.name.toUpperCase().includes(a.toUpperCase())});return c.a.createElement(c.a.Fragment,null,u.map(function(e){return c.a.createElement(h,{key:e.name,name:e.name,number:e.number,id:e.id,setPersons:s,setMessage:n})}))},v=function(e){var t=e.Filtered,n=e.handleFilterChange;return c.a.createElement(c.a.Fragment,null,"rajaa n\xe4ytett\xe4vi\xe4 ",c.a.createElement("input",{onChange:n,value:t}))},b=function(e){var t=e.persons,n=e.setPersons,a=e.newName,s=e.newNumber,u=e.setMessage,r=e.setNewName,o=e.setNewNumber,l=e.handleNameChange,i=e.handleNumberChange;return c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var c={name:a,number:s},l=t.find(function(e){return e.name===a});if(void 0!==l){var i=l.id;window.confirm("".concat(a," on jo luettelossa, korvataanko vanha numero uudella?"))&&d(i,c).then(function(e){return n(t.map(function(t){return t.id!==i?t:e}))}).then(function(){u({message:"".concat(a," Tiedot p\xe4ivitetty."),style:"success"}),setTimeout(function(){u({message:null})},2e3)}).catch(function(e){u({message:"Henkil\xf6 ".concat(a," oli jo poistettu."),style:"error"}),setTimeout(function(){u({message:null})},2e3)})}else f(c).then(function(e){return n(t.concat(e))}).then(function(){u({message:"".concat(a," lis\xe4tty onnistuneesti."),style:"success"}),setTimeout(function(){u({message:null})},2e3)}).catch(function(e){u({message:e.response.data.error,style:"error"}),setTimeout(function(){u({message:null})},2e3)});r(""),o("")}},c.a.createElement("div",null,"nimi: ",c.a.createElement("input",{onChange:l,value:a})),c.a.createElement("div",null,"numero: ",c.a.createElement("input",{onChange:i,value:s})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))},E=function(e){var t=e.message,n=e.classes,a=void 0===n?"success":n;return null===t?null:c.a.createElement("div",{className:a},t)};u.a.render(c.a.createElement(function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],s=t[1],u=Object(r.useState)(""),o=Object(a.a)(u,2),l=o[0],i=o[1],f=Object(r.useState)(""),d=Object(a.a)(f,2),g=d[0],h=d[1],w=Object(r.useState)(""),N=Object(a.a)(w,2),j=N[0],y=N[1],C=Object(r.useState)({message:null,style:"success"}),O=Object(a.a)(C,2),k=O[0],F=O[1];Object(r.useEffect)(function(){m().then(function(e){s(e)})},[]);return c.a.createElement("div",null,c.a.createElement(E,{message:k.message,classes:k.style}),c.a.createElement("h2",null,"Puhelinluettelo"),c.a.createElement(v,{handleFilterChange:function(e){y(e.target.value)},Filtered:j}),c.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),c.a.createElement(b,{persons:n,setMessage:F,setPersons:s,newName:l,setNewName:i,setNewNumber:h,handleNameChange:function(e){i(e.target.value)},newNumber:g,handleNumberChange:function(e){h(e.target.value)}}),c.a.createElement("h2",null,"Numerot"),c.a.createElement(p,{persons:n,setMessage:F,setPersons:s,Filtered:j}))},null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.5d2722b7.chunk.js.map